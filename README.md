<img width="auto" height="200" alt="77c745c1-a2e7-468e-9bb0-ef8971fed0b3" src="https://github.com/user-attachments/assets/92fb9761-19cd-43fd-afb8-72afecb2a761" />


ðŸš€ A Go service that fetches aircraft data generated by dump1090-fa and streams it to Grafana Loki for real-time monitoring and analysis.

## Prerequisites

- dump1090-fa instance (such as piAware or ADS-B Feeder)
- Grafana Loki instance (Cloud or OSS)

## Configuration

Create a `.env` file in the project root with the following variables:

```env
FLIGHT_DATA_URL=http://your-flightdata-instance/skyaware/data/aircraft.json
LOKI_URL=http://your-loki-instance

# Optional: For Grafana Cloud Logs authentication
GRAFANA_TENANT_ID=your-grafana-tenant-id
GRAFANA_PASSWORD=your-grafana-api-key

# Logging Configuration
LOG_LEVEL=info
```

### Authentication Options

#### No Authentication (Default)
If no authentication environment variables are set, the service will connect without authentication (suitable for local Grafana instances).

#### Grafana Cloud Authentication
For Grafana Cloud, use your Tenant ID and API key:
```env
GRAFANA_TENANT_ID=123456
GRAFANA_PASSWORD=glc_eyJvIjoiNzg5MDkxIiwibiI6InRlc3QiLCJrIjoi...
```

**Note**: 
- The `GRAFANA_TENANT_ID` is your Grafana Cloud Logs Tenant ID
- The `GRAFANA_PASSWORD` is your Grafana Cloud API key (not your login password)
- You can find your Logs Tenant ID in your Grafana Cloud portal
- Create an API key in your Grafana Cloud settings with appropriate permissions Logs Write

### Logging Configuration

The application uses structured logging in logfmt format with configurable log levels.

#### Log Levels

Set the `LOG_LEVEL` environment variable to control logging verbosity:

- `debug`: Shows all logs including debug calls, environment variables, and HTTP requests
- `info`: Shows info, warn, and error logs (default)
- `warn`: Shows only warning and error logs
- `error`: Shows only error logs


## Installation

### Building from Source

1. Clone the repository:
```bash
git clone https://github.com/burnettdev/adsb2loki.git
cd adsb2loki
```

2. Install dependencies:
```bash
go mod tidy
```

3. Build the application:
```bash
go build -o adsb2loki
```

4. Run the application:
```bash
./adsb2loki
```

### Docker

Build and run with Docker:

```bash
# Build the image
docker build -t adsb2loki .

# Run the container
docker run -d \
  --name adsb2loki \
  -e FLIGHT_DATA_URL=http://your-flightdata-instance/skyaware/data/aircraft.json \
  -e LOKI_URL=http://your-loki-instance \
  --restart unless-stopped \
  adsb2loki
```
Pull from Github Container Registry:

```bash
# Run the container
docker run -d \
  --name ghcr.io/burnettdev/adsb2loki:latest \
  -e FLIGHT_DATA_URL=http://your-flightdata-instance/skyaware/data/aircraft.json \
  -e LOKI_URL=http://your-loki-instance \
  --restart unless-stopped \
  adsb2loki
```

## Usage

The service will:
- Fetch aircraft data every 5 seconds
- Push the data to Loki with appropriate labels
- Log any errors that occur during the process

## Data Structure

Each aircraft entry in Loki includes:
- Timestamp
- Labels for easy querying
- Full aircraft data as JSON

## Contributing

Feel free to open issues or submit pull requests!

## License

MIT License - feel free to use this project for whatever you'd like!

<img width="auth" height="150" alt="image" src="https://github.com/user-attachments/assets/cbb403e2-7042-42af-8124-422128e146e8" />

ADSB2Loki is proudly part of Snyk's Open Source Programme, ensuring vulnerabilities are found sooner rather than later. You can find more information <a href="https://snyk.io/?utm_source=open-source&utm_medium=pg-ptr&utm_campaign=ref-2501-osp&utm_content=pg-cta">here.</a>

